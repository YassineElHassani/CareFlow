{
  "info": {
    "name": "CareFlow EHR API",
    "description": "Complete API collection for CareFlow Electronic Health Record system",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api/v1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Checks",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Readiness Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/ready",
              "host": ["{{baseUrl}}"],
              "path": ["ready"]
            }
          }
        },
        {
          "name": "API Root",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}",
              "host": ["{{baseUrl}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.data.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.data.refreshToken);",
                  "    pm.environment.set('userId', responseJson.data.user.id);",
                  "    pm.environment.set('doctorId', responseJson.data.user.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"dr.john@careflow.com\",\n  \"password\": \"Doctor@123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"nationalId\": \"DOC98765\",\n  \"gender\": \"male\",\n  \"phone\": \"+212612345678\",\n  \"dateOfBirth\": \"1980-05-15\",\n  \"address\": {\n    \"street\": \"123 Medical Street\",\n    \"city\": \"Casablanca\",\n    \"state\": \"Casablanca-Settat\",\n    \"country\": \"Morocco\"\n  },\n  \"role\": \"doctor\",\n  \"specialization\": [\"Cardiology\", \"Internal Medicine\"],\n  \"licenseNumber\": \"MED-2024-5678\",\n  \"department\": \"Cardiology\",\n  \"qualifications\": [\"MD\", \"Board Certified Cardiologist\"],\n  \"yearsOfExperience\": 15\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/register",
              "host": ["{{baseUrl}}"],
              "path": ["users", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.data.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.data.refreshToken);",
                  "    pm.environment.set('userId', responseJson.data.user.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"dr.john@careflow.com\",\n  \"password\": \"Doctor@123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/login",
              "host": ["{{baseUrl}}"],
              "path": ["users", "login"]
            }
          }
        },
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/profile",
              "host": ["{{baseUrl}}"],
              "path": ["users", "profile"]
            }
          }
        }
      ]
    },
    {
      "name": "Patient Management",
      "item": [
        {
          "name": "Create Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('patientId', responseJson.data._id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"personalInfo\": {\n    \"firstName\": \"Ahmed\",\n    \"lastName\": \"Hassan\",\n    \"nationalId\": \"PAT12345\",\n    \"gender\": \"male\",\n    \"dateOfBirth\": \"1985-03-20\",\n    \"bloodType\": \"A+\",\n    \"maritalStatus\": \"married\"\n  },\n  \"contact\": {\n    \"phone\": \"+212612345690\",\n    \"email\": \"ahmed.hassan@email.com\",\n    \"address\": {\n      \"street\": \"123 Main Street\",\n      \"city\": \"Rabat\",\n      \"state\": \"Rabat-Salé-Kénitra\",\n      \"zipCode\": \"10000\",\n      \"country\": \"Morocco\"\n    }\n  },\n  \"emergencyContact\": {\n    \"name\": \"Fatima Hassan\",\n    \"relationship\": \"wife\",\n    \"phone\": \"+212612345691\"\n  },\n  \"medicalInfo\": {\n    \"allergies\": [\"Penicillin\"],\n    \"chronicConditions\": [\"Hypertension\"]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients",
              "host": ["{{baseUrl}}"],
              "path": ["patients"]
            }
          }
        },
        {
          "name": "List All Patients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["patients"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Patient by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Search Patients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/patients/search/Ahmed",
              "host": ["{{baseUrl}}"],
              "path": ["patients", "search", "Ahmed"]
            }
          }
        }
      ]
    },
    {
      "name": "Doctor Management",
      "item": [
        {
          "name": "List All Doctors",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/doctors?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Search Doctors",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/doctors/search?q=cardiology",
              "host": ["{{baseUrl}}"],
              "path": ["doctors", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "cardiology"
                }
              ]
            }
          }
        },
        {
          "name": "Get Doctor Availability",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/doctors/{{doctorId}}/availability?date=2025-10-19",
              "host": ["{{baseUrl}}"],
              "path": ["doctors", "{{doctorId}}", "availability"],
              "query": [
                {
                  "key": "date",
                  "value": "2025-10-19"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Appointment Management",
      "item": [
        {
          "name": "Create Appointment",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('appointmentId', responseJson.data._id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patient\": \"{{patientId}}\",\n  \"doctor\": \"{{doctorId}}\",\n  \"scheduledDate\": \"2025-10-19\",\n  \"scheduledTime\": \"10:00\",\n  \"duration\": 30,\n  \"type\": \"consultation\",\n  \"chiefComplaint\": \"Annual checkup and blood pressure monitoring\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/appointments",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"]
            }
          }
        },
        {
          "name": "List All Appointments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/appointments?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Appointment by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/appointments/{{appointmentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["appointments", "{{appointmentId}}"]
            }
          }
        },
        {
          "name": "Cancel Appointment",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cancellationReason\": \"Patient requested to reschedule\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/appointments/{{appointmentId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["appointments", "{{appointmentId}}", "cancel"]
            }
          }
        },
        {
          "name": "Test Conflict Detection",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patient\": \"{{patientId}}\",\n  \"doctor\": \"{{doctorId}}\",\n  \"scheduledDate\": \"2025-10-19\",\n  \"scheduledTime\": \"10:15\",\n  \"duration\": 30,\n  \"type\": \"follow-up\",\n  \"chiefComplaint\": \"Test conflict detection - should fail with 409\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/appointments",
              "host": ["{{baseUrl}}"],
              "path": ["appointments"]
            }
          }
        }
      ]
    }
  ]
}
